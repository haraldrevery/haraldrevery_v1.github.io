const TWO_PI=2*Math.PI,MOUSE_INFLUENCE_DIST_SQ=62500;let targetRotateX=0,targetRotateY=0,currentRotateX=0,currentRotateY=0;const logoSvg=document.getElementById("main-logo-svg");function smoothRotate(){if(logoSvg){currentRotateX+=.29*(targetRotateX-currentRotateX),currentRotateY+=.29*(targetRotateY-currentRotateY),logoSvg.style.transform=`translateX(-9.81%) rotateX(${currentRotateX}deg) rotateY(${currentRotateY}deg) translateZ(50px)`;const t=document.documentElement.classList.contains("dark")?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.3)";logoSvg.style.filter=`drop-shadow(${.5*currentRotateY}px ${.5*currentRotateX}px 20px ${t})`}requestAnimationFrame(smoothRotate)}let plexusRequestId;document.addEventListener("mousemove",t=>{targetRotateY=40*(t.clientX/window.innerWidth-.5),targetRotateX=-40*(t.clientY/window.innerHeight-.5)}),document.addEventListener("mouseout",t=>{t.relatedTarget||t.toElement||(targetRotateY=0,targetRotateX=0)}),smoothRotate();let mouseX=0,mouseY=0,targetX=0,targetY=0;document.addEventListener("mousemove",t=>{mouseX=(t.clientX-window.innerWidth/2)/(window.innerWidth/2),mouseY=(t.clientY-window.innerHeight/2)/(window.innerHeight/2)}),window.restartPlexus=function(){plexusRequestId&&cancelAnimationFrame(plexusRequestId);const t=document.getElementById("plexus-canvas"),e=document.getElementById("main-logo-svg");if(!t||!e)return;const n=t.getContext("2d"),i=1e3,o=1100,s=document.documentElement.classList.contains("dark")?"255, 255, 255":"26, 26, 26",a=window.innerWidth<768,r=a?0:500,c=a?0:145,l=c*c,h=c,d=Math.ceil(i/h),m=Math.ceil(o/h),f=new Float32Array(r),u=new Float32Array(r),g=new Float32Array(r),w=new Float32Array(r),y=new Int16Array(r);let x=0;const v=Date.now();function p(t){f[t]=Math.random()*i,u[t]=Math.random()*o,g[t]=.8*(Math.random()-.5),w[t]=.8*(Math.random()-.5),y[t]=t}!function t(){n.clearRect(0,0,i,o);const e=Math.min((Date.now()-v)/3e3,1),a=Math.floor(e*r);for(;x<a;)p(x),x++;const M=Array.from({length:d*m},()=>[]);n.fillStyle=`rgba(${s}, 0.8)`;for(let t=0;t<x;t++){f[t]+=g[t],u[t]+=w[t],(f[t]<0||f[t]>i)&&(g[t]*=-1),(u[t]<0||u[t]>o)&&(w[t]*=-1),n.fillRect(f[t]-1|0,u[t]-1|0,2,2);const e=Math.floor(f[t]/h),s=Math.floor(u[t]/h);e>=0&&e<d&&s>=0&&s<m&&M[e+s*d].push(t)}const R=Array.from({length:11},()=>new Path2D);for(let t=0;t<x;t++){const e=f[t],n=u[t],i=Math.floor(e/h),o=Math.floor(n/h),s=y[t];for(let t=-1;t<=1;t++)for(let a=-1;a<=1;a++){const r=i+t,h=o+a;if(r>=0&&r<d&&h>=0&&h<m){const t=M[r+h*d];for(let i=0;i<t.length;i++){const o=t[i];if(s>=y[o])continue;const a=e-f[o],r=n-u[o],h=a*a+r*r;if(h<l){const t=Math.sqrt(h),i=Math.floor(10*(1-t/c));i>=0&&i<=10&&(R[i].moveTo(0|e,0|n),R[i].lineTo(0|f[o],0|u[o]))}}}}}n.lineWidth=.8;for(let t=0;t<=10;t++){const e=t/10*.8;e>.01&&(n.strokeStyle=`rgba(${s}, ${e})`,n.stroke(R[t]))}plexusRequestId=requestAnimationFrame(t)}()},document.addEventListener("DOMContentLoaded",()=>{window.restartPlexus()}),window.restartLogoAnimations=function(){const t=document.querySelector("#logo-shape-definition.animate-logo"),e=document.querySelectorAll(".wave-echo");if(!t)return;const n=t.querySelectorAll("path");n.forEach(t=>{t.style.animation="none",t.style.strokeDashoffset="4000",t.style.fillOpacity="0"}),e.forEach(t=>{t.style.animation="none",t.style.transform="scale(5)",t.style.opacity="0",t.style.strokeWidth="0.5px"}),t.offsetWidth,n.forEach(t=>{t.style.animation="logoDraw 5s cubic-bezier(.75,.03,.46,.46) forwards"}),e.forEach((t,e)=>{setTimeout(()=>{t.style.animation="implodingWave 3.5s cubic-bezier(0.19, 1, 0.22, 1) forwards"},100*e)})},setTimeout(()=>window.restartPlexus(),150),setTimeout(()=>window.restartLogoAnimations(),1),document.addEventListener("alpine:init",()=>{Alpine.data("plexusBackground",()=>({canvas:null,ctx:null,particles:[],startTime:null,config:{particleCount:0,lineDistance:0,particleSize:1.59,baseSpeed:.4,lineOpacity:.2},mouse:{x:-9999,y:-9999},cols:0,rows:0,init(){this.canvas=this.$refs.canvas,this.ctx=this.canvas.getContext("2d"),this.startTime=Date.now();const t=window.innerWidth<768;this.config.particleCount=t?21:210,this.config.lineDistance=t?140:275,this.handleResize(),window.addEventListener("resize",()=>this.handleResize()),window.addEventListener("mousemove",t=>{this.mouse.x=t.clientX,this.mouse.y=t.clientY}),this.animate()},handleResize(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight;const t=window.innerWidth<768;this.config.particleCount=t?25:100,this.config.lineDistance=t?250:221,this.cols=Math.ceil(this.canvas.width/this.config.lineDistance),this.rows=Math.ceil(this.canvas.height/this.config.lineDistance)},createParticle(t){return{id:t,x:Math.random()*this.canvas.width,y:Math.random()*this.canvas.height,vx:(Math.random()-.5)*this.config.baseSpeed,vy:(Math.random()-.5)*this.config.baseSpeed}},animate(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);const t=Math.min((Date.now()-this.startTime)/3e3,1),e=Math.floor(t*this.config.particleCount);for(;this.particles.length<e;)this.particles.push(this.createParticle(this.particles.length));const n=this.darkMode?"255, 255, 255":"0, 0, 0";this.ctx.fillStyle=`rgba(${n}, 0.4)`;const i=Array.from({length:this.cols*this.rows},()=>[]);this.particles.forEach(t=>{const e=t.x-this.mouse.x,n=t.y-this.mouse.y,o=e*e+n*n<62500?1.96:1;t.x+=t.vx*o,t.y+=t.vy*o,(t.x<0||t.x>this.canvas.width)&&(t.vx*=-1),(t.y<0||t.y>this.canvas.height)&&(t.vy*=-1),this.ctx.beginPath(),this.ctx.arc(0|t.x,0|t.y,this.config.particleSize,0,TWO_PI),this.ctx.fill();const s=Math.floor(t.x/this.config.lineDistance),a=Math.floor(t.y/this.config.lineDistance);s>=0&&s<this.cols&&a>=0&&a<this.rows&&i[s+a*this.cols].push(t)});const o=Array.from({length:11},()=>new Path2D),s=this.config.lineDistance*this.config.lineDistance;this.particles.forEach(t=>{const e=Math.floor(t.x/this.config.lineDistance),n=Math.floor(t.y/this.config.lineDistance);for(let a=-1;a<=1;a++)for(let r=-1;r<=1;r++){const c=e+a,l=n+r;if(c>=0&&c<this.cols&&l>=0&&l<this.rows){const e=i[c+l*this.cols];for(let n=0;n<e.length;n++){const i=e[n];if(t.id>=i.id)continue;const a=t.x-i.x,r=t.y-i.y,c=a*a+r*r;if(c<s){const e=Math.sqrt(c),n=Math.floor(10*(1-e/this.config.lineDistance));n>=0&&n<=10&&(o[n].moveTo(0|t.x,0|t.y),o[n].lineTo(0|i.x,0|i.y))}}}}});for(let t=0;t<=10;t++){const e=t/10*this.config.lineOpacity;e>.01&&(this.ctx.lineWidth=t/10*1.5,this.ctx.strokeStyle=`rgba(${n}, ${e})`,this.ctx.stroke(o[t]))}requestAnimationFrame(()=>this.animate())}}))});
