const TWO_PI=2*Math.PI,MOUSE_INFLUENCE_DIST_SQ=62500,plexusWorkerCode='\n    const TWO_PI = Math.PI * 2;\n    let ctx, width, height, isDark, rgb, config, particles = [], startTime, grid = [], cols, rows;\n    let mouse = { x: -9999, y: -9999 };\n    const MOUSE_INFLUENCE_DIST_SQ = 62500;\n\n    self.onmessage = function(e) {\n        if (e.data.type === \'init\') {\n            const canvas = e.data.canvas;\n            ctx = canvas.getContext(\'2d\');\n            width = e.data.width; height = e.data.height;\n            config = e.data.config; isDark = e.data.isDark;\n            rgb = isDark ? "255, 255, 255" : (config.isBackground ? "0, 0, 0" : "26, 26, 26");\n            startTime = Date.now();\n            cols = Math.ceil(width / config.lineDistance);\n            rows = Math.ceil(height / config.lineDistance);\n            animate();\n        } else if (e.data.type === \'mouse\') { mouse = e.data.mouse; }\n        else if (e.data.type === \'theme\') {\n            isDark = e.data.isDark;\n            rgb = isDark ? "255, 255, 255" : (config.isBackground ? "0, 0, 0" : "26, 26, 26");\n        }\n    };\n\n    function animate() {\n        ctx.clearRect(0, 0, width, height);\n        const progress = Math.min((Date.now() - startTime) / 3000, 1);\n        const target = Math.floor(progress * config.particleCount);\n        while (particles.length < target) {\n            particles.push({\n                id: particles.length, x: Math.random() * width, y: Math.random() * height,\n                vx: (Math.random() - 0.5) * (config.baseSpeed || 0.8),\n                vy: (Math.random() - 0.5) * (config.baseSpeed || 0.8)\n            });\n        }\n        grid = Array.from({ length: cols * rows }, () => []);\n        ctx.fillStyle = `rgba(${rgb}, ${config.isBackground ? 0.4 : 0.8})`;\n        particles.forEach(p => {\n            const dxM = p.x - mouse.x, dyM = p.y - mouse.y;\n            const speedMult = (dxM*dxM + dyM*dyM) < MOUSE_INFLUENCE_DIST_SQ ? 1.96 : 1.0;\n            p.x += p.vx * speedMult; p.y += p.vy * speedMult;\n            if (p.x < 0 || p.x > width) p.vx *= -1; if (p.y < 0 || p.y > height) p.vy *= -1;\n            ctx.fillRect((p.x - 1) | 0, (p.y - 1) | 0, config.particleSize || 2, config.particleSize || 2);\n            const c = Math.floor(p.x / config.lineDistance), r = Math.floor(p.y / config.lineDistance);\n            if (c >= 0 && c < cols && r >= 0 && r < rows) grid[c + r * cols].push(p);\n        });\n        const binCount = config.isBackground ? 6 : 11;\n        const bins = Array.from({ length: binCount }, () => new Path2D());\n        const dSqMax = config.lineDistance * config.lineDistance;\n        particles.forEach(p1 => {\n            const c = Math.floor(p1.x / config.lineDistance), r = Math.floor(p1.y / config.lineDistance);\n            for (let i = -1; i <= 1; i++) {\n                for (let j = -1; j <= 1; j++) {\n                    const nc = c + i, nr = r + j;\n                    if (nc >= 0 && nc < cols && nr >= 0 && nr < rows) {\n                        grid[nc + nr * cols].forEach(p2 => {\n                            if (p1.id >= p2.id) return;\n                            const dx = p1.x - p2.x, dy = p1.y - p2.y, dSq = dx*dx + dy*dy;\n                            if (dSq < dSqMax) {\n                                const alphaBin = Math.floor((1 - Math.sqrt(dSq) / config.lineDistance) * (binCount - 1));\n                                bins[alphaBin].moveTo(p1.x | 0, p1.y | 0); bins[alphaBin].lineTo(p2.x | 0, p2.y | 0);\n                            }\n                        });\n                    }\n                }\n            }\n        });\n        ctx.lineWidth = config.isBackground ? 1.2 : 0.8;\n        for (let b = 0; b < binCount; b++) {\n            ctx.strokeStyle = `rgba(${rgb}, ${config.isBackground ? config.lineOpacity : (b * 8) / 100})`;\n            ctx.stroke(bins[b]);\n        }\n        requestAnimationFrame(animate);\n    }\n';let targetRotateX=0,targetRotateY=0,currentRotateX=0,currentRotateY=0;const logoSvg=document.getElementById("main-logo-svg");function smoothRotate(){if(logoSvg){currentRotateX+=.29*(targetRotateX-currentRotateX),currentRotateY+=.29*(targetRotateY-currentRotateY),logoSvg.style.transform=`translateX(-9.81%) rotateX(${currentRotateX}deg) rotateY(${currentRotateY}deg) translateZ(50px)`;const t=document.documentElement.classList.contains("dark")?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.3)";logoSvg.style.filter=`drop-shadow(${.5*currentRotateY}px ${.5*currentRotateX}px 20px ${t})`}requestAnimationFrame(smoothRotate)}document.addEventListener("mousemove",t=>{targetRotateY=40*(t.clientX/window.innerWidth-.5),targetRotateX=-40*(t.clientY/window.innerHeight-.5)}),smoothRotate();const createPlexus=(t,e,n)=>{const i=()=>document.documentElement.classList.contains("dark");let o={x:-9999,y:-9999};if(t.transferControlToOffscreen){const o=t.transferControlToOffscreen(),a=new Blob([plexusWorkerCode],{type:"application/javascript"}),r=new Worker(URL.createObjectURL(a));r.postMessage({type:"init",canvas:o,width:t.width,height:t.height,config:n,isDark:i()},[o]);const s=t=>{const n=e?t.clientX:(t.clientX-window.innerWidth/2)/(window.innerWidth/2)*500+500,i=e?t.clientY:(t.clientY-window.innerHeight/2)/(window.innerHeight/2)*550+550;r.postMessage({type:"mouse",mouse:{x:n,y:i}})};window.addEventListener("mousemove",s);return new MutationObserver(()=>r.postMessage({type:"theme",isDark:i()})).observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),{type:"worker",worker:r,cleanup:()=>{window.removeEventListener("mousemove",s),r.terminate()}}}{const a=t.getContext("2d");let r=[],s=Date.now();const c=Math.ceil(t.width/n.lineDistance),l=Math.ceil(t.height/n.lineDistance),d=()=>{const h=i()?"255, 255, 255":e?"0, 0, 0":"26, 26, 26";a.clearRect(0,0,t.width,t.height);const p=Math.floor(Math.min((Date.now()-s)/3e3,1)*n.particleCount);for(;r.length<p;)r.push({id:r.length,x:Math.random()*t.width,y:Math.random()*t.height,vx:(Math.random()-.5)*(n.baseSpeed||.8),vy:(Math.random()-.5)*(n.baseSpeed||.8)});const f=Array.from({length:c*l},()=>[]);a.fillStyle=`rgba(${h}, ${e?.4:.8})`,r.forEach(e=>{const i=e.x-o.x,r=e.y-o.y,s=i*i+r*r<62500?1.96:1;e.x+=e.vx*s,e.y+=e.vy*s,(e.x<0||e.x>t.width)&&(e.vx*=-1),(e.y<0||e.y>t.height)&&(e.vy*=-1),a.fillRect(e.x-1|0,e.y-1|0,n.particleSize||2,n.particleSize||2);const d=Math.floor(e.x/n.lineDistance),h=Math.floor(e.y/n.lineDistance);d>=0&&d<c&&h>=0&&h<l&&f[d+h*c].push(e)});const u=e?6:11,m=Array.from({length:u},()=>new Path2D),w=n.lineDistance**2;r.forEach(t=>{const e=Math.floor(t.x/n.lineDistance),i=Math.floor(t.y/n.lineDistance);for(let o=-1;o<=1;o++)for(let a=-1;a<=1;a++){const r=e+o,s=i+a;r>=0&&r<c&&s>=0&&s<l&&f[r+s*c].forEach(e=>{if(t.id>=e.id)return;const i=t.x-e.x,o=t.y-e.y,a=i*i+o*o;if(a<w){const i=Math.floor((1-Math.sqrt(a)/n.lineDistance)*(u-1));m[i].moveTo(0|t.x,0|t.y),m[i].lineTo(0|e.x,0|e.y)}})}}),a.lineWidth=e?1.2:.8;for(let t=0;t<u;t++)a.strokeStyle=`rgba(${h}, ${e?n.lineOpacity:8*t/100})`,a.stroke(m[t]);g.id=requestAnimationFrame(d)},h=t=>{o.x=e?t.clientX:(t.clientX-window.innerWidth/2)/(window.innerWidth/2)*500+500,o.y=e?t.clientY:(t.clientY-window.innerHeight/2)/(window.innerHeight/2)*550+550};window.addEventListener("mousemove",h);let g={id:requestAnimationFrame(d)};return{type:"fallback",cleanup:()=>{window.removeEventListener("mousemove",h),cancelAnimationFrame(g.id)}}}};let logoInstance;window.restartPlexus=function(){logoInstance&&logoInstance.cleanup();const t=document.getElementById("plexus-canvas");t&&(t.width=1e3,t.height=1100,logoInstance=createPlexus(t,!1,{particleCount:window.innerWidth<768?0:500,lineDistance:145,particleSize:2}))},document.addEventListener("alpine:init",()=>{Alpine.data("plexusBackground",()=>({instance:null,init(){const t=this.$refs.canvas;t.width=window.innerWidth,t.height=window.innerHeight;const e=window.innerWidth<768;this.instance=createPlexus(t,!0,{particleCount:e?25:120,lineDistance:e?250:221,particleSize:1.59,baseSpeed:.4,lineOpacity:.2,isBackground:!0})}}))}),window.restartLogoAnimations=function(){const t=document.querySelector("#logo-shape-definition.animate-logo");if(!t)return;const e=t.querySelectorAll("path"),n=document.querySelectorAll(".wave-echo");e.forEach(t=>{t.style.animation="none",t.style.strokeDashoffset="4000",t.style.fillOpacity="0"}),n.forEach(t=>{t.style.animation="none",t.style.transform="scale(5)",t.style.opacity="0"}),t.offsetWidth,e.forEach(t=>t.style.animation="logoDraw 5s cubic-bezier(.75,.03,.46,.46) forwards"),n.forEach((t,e)=>{setTimeout(()=>t.style.animation="implodingWave 3.5s cubic-bezier(0.19, 1, 0.22, 1) forwards",100*e)})},document.addEventListener("DOMContentLoaded",()=>{window.restartPlexus(),setTimeout(window.restartLogoAnimations,1)});
